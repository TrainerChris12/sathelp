<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Library | SAT Math Practice</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@600;700;900&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="video-styles.css">
</head>
<body>

<!-- Auth Bar -->
<div class="auth-bar">
    <div class="auth-bar-content">
        <div class="app-title">
            <h2>SAT Math Practice - Video Library</h2>
        </div>
        <div class="user-section" id="userSection"></div>
    </div>
</div>

<!-- Header -->
<div class="header video-header">
    <div class="header-content">
        <h1>üì∫ Video Library</h1>
        <p class="subtitle">Watch step-by-step problem solutions and concept reviews</p>
        <div class="header-tabs">
            <a href="index.html" class="tab-link">Practice Problems</a>
            <a href="videos.html" class="tab-link active">Video Library</a>
        </div>
    </div>
</div>

<!-- Video Stats Banner -->
<div class="stats-banner">
    <div class="stats-left">
        <div class="stat-item">
            <span class="stat-value" id="totalVideos">0</span>
            <span class="stat-label">Total Videos</span>
        </div>
        <div class="stat-item">
            <span class="stat-value" id="watchedVideos">0</span>
            <span class="stat-label">Watched</span>
        </div>
        <div class="stat-item">
            <span class="stat-value" id="watchTime">0</span>
            <span class="stat-label">Minutes Watched</span>
        </div>
    </div>

    <div class="stats-actions">
        <button class="stats-theme-toggle" id="themeToggle" title="Toggle theme">
            <span class="theme-icon">‚òæ</span>
        </button>
    </div>
</div>

<div class="container">
    <!-- Video Layout -->
    <div class="video-layout">
        <!-- Filters Sidebar -->
        <aside class="video-filters">
            <div class="filter-section">
                <h3>Video Type</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-type="all">All Videos</button>
                    <button class="filter-btn" data-type="concept">Concepts</button>
                    <button class="filter-btn" data-type="walkthrough">Walkthroughs</button>
                    <button class="filter-btn" data-type="strategy">Strategies</button>
                </div>
            </div>

            <div class="filter-section">
                <h3>Topic</h3>
                <div class="topic-checkboxes">
                    <label class="checkbox-label">
                        <input type="checkbox" data-topic="algebra" checked>
                        <span>Algebra</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" data-topic="advanced-math" checked>
                        <span>Advanced Math</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" data-topic="problem-solving" checked>
                        <span>Problem Solving</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" data-topic="geometry" checked>
                        <span>Geometry</span>
                    </label>
                </div>
            </div>

            <div class="filter-section">
                <h3>Difficulty</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-difficulty="easy">Easy</button>
                    <button class="filter-btn active" data-difficulty="medium">Medium</button>
                    <button class="filter-btn active" data-difficulty="hard">Hard</button>
                </div>
            </div>

            <div class="filter-section">
                <h3>Progress</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-progress="all">All</button>
                    <button class="filter-btn" data-progress="unwatched">Unwatched</button>
                    <button class="filter-btn" data-progress="watched">Watched</button>
                </div>
            </div>

            <div class="filter-section">
                <h3>Search</h3>
                <input type="text" id="videoSearch" placeholder="Search videos..." class="search-input">
            </div>
        </aside>

        <!-- Video Grid -->
        <main class="video-main">
            <div class="video-grid" id="videoGrid">
                <div class="loading">Loading videos...</div>
            </div>
        </main>
    </div>
</div>

<!-- Video Player Modal -->
<div class="video-modal" id="videoModal">
    <div class="video-modal-content">
        <button class="video-modal-close" id="closeVideoModal">√ó</button>

        <div class="video-player-wrapper">
            <iframe id="videoPlayer"
                    frameborder="0"
                    allowfullscreen
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture">
            </iframe>
        </div>

        <div class="video-info">
            <div class="video-header-row">
                <h2 id="videoTitle"></h2>
                <div class="video-actions">
                    <button class="action-btn-small" id="markWatchedBtn">
                        <span id="watchedIcon">‚òê</span> Watched
                    </button>
                    <button class="action-btn-small helpful-btn" id="helpfulBtn">
                        üëç Helpful (<span id="helpfulCount">0</span>)
                    </button>
                </div>
            </div>

            <div class="video-meta">
                <span class="badge badge-difficulty" id="videoDifficultyBadge"></span>
                <span class="badge badge-type" id="videoTypeBadge"></span>
                <span class="video-duration" id="videoDuration"></span>
                <span class="video-views" id="videoViews"></span>
            </div>

            <div class="video-description" id="videoDescription"></div>

            <div class="related-section" id="relatedProblemsSection" style="display: none;">
                <h3>Related Problems</h3>
                <div class="related-problems-list" id="relatedProblemsList"></div>
            </div>

            <div class="related-section" id="relatedVideosSection" style="display: none;">
                <h3>Related Videos</h3>
                <div class="related-videos-list" id="relatedVideosList"></div>
            </div>
        </div>
    </div>
</div>

<!-- Back to Top Button -->
<button class="back-to-top" id="backToTop" aria-label="Back to top">
    <span>‚Üë</span>
</button>

<!-- Firebase SDK -->
<script defer src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script defer src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script defer src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<!-- Scripts -->
<script defer src="../shared/firebase-config.js"></script>
<script defer src="../shared/storage-manager.js"></script>
<script defer src="./video-app.js"></script>

</body>
</html>